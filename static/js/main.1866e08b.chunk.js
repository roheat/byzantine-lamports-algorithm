(window.webpackJsonpbyzantine=window.webpackJsonpbyzantine||[]).push([[0],{23:function(t,e,a){t.exports=a(66)},28:function(t,e,a){},29:function(t,e,a){},64:function(t,e,a){},65:function(t,e,a){},66:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(9),u=a.n(i),l=(a(28),a(1)),c=a(2),s=a(4),o=a(3),h=a(5),d=a(22),f=a(10),p=(a(29),function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(s.a)(this,Object(o.a)(e).call(this))).handleChange=function(e){var a,n=e.target,r=n.name,i=n.value;t.setState((a={},Object(f.a)(a,r,parseInt(i)),Object(f.a)(a,"faulty",[]),a))},t.handleClick=function(e){var a=e.target,n=a.checked,r=a.value,i=t.state.faulty;n?t.setState({faulty:[].concat(Object(d.a)(i),[parseInt(r)])}):t.setState({faulty:i.filter(function(t){return t!==parseInt(r)})})},t.state={N:0,faulty:[]},t}return Object(h.a)(e,t),Object(c.a)(e,[{key:"renderCheckboxes",value:function(){for(var t=this,e=[],a=0;a<this.state.N;a++)e.push(a);return e.map(function(e){return r.a.createElement("div",{className:"checkbox",key:e},r.a.createElement("input",{checked:t.state.faulty.includes(e),type:"checkbox",value:e,onChange:t.handleClick}),r.a.createElement("label",null,"General ",e))})}},{key:"render",value:function(){var t=this,e=this.state,a=e.N,n=e.faulty;return r.a.createElement("div",{className:"options-container"},r.a.createElement("h1",{className:"title"},"Visualizing Lamport's Algorithm"),r.a.createElement("h5",null,"Number of Generals (N)"),r.a.createElement("input",{className:"general-count",name:"N",type:"number",onChange:this.handleChange}),r.a.createElement("h5",null,"Pick Traitor Generals"),a>0&&this.renderCheckboxes(),a>0&&r.a.createElement("button",{className:"button",onClick:function(){return t.props.onSubmitClick(a,n.length,n)}},"Submit"))}}]),e}(r.a.Component)),m=a(21),v=a.n(m),y=(a(64),"1"),b="?",k=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(s.a)(this,Object(o.a)(e).call(this,t))).state={tree:a.Tree({input:y,path:"0",output:b}),myTreeData:[],finished:!1},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidUpdate",value:function(t,e){var a=this;t!==this.props&&this.setState({tree:this.Tree({input:y,path:"0",output:b}),myTreeData:[],finished:!1},function(){return a.algorithm()})}},{key:"algorithm",value:function(){var t=this.state.tree,e=this.props,a=e.N,n=e.M,r=new Array(a).fill(!0);this.GenerateChildren(a,n,r),this.Decide(a,n);var i=this.mapTree([t._root]);this.setState({myTreeData:i,tree:t,finished:!0});var u=this.treeContainer.getBoundingClientRect();this.setState({translate:{x:u.width/2,y:u.height/4}})}},{key:"Node",value:function(t){return{data:t,children:[]}}},{key:"Tree",value:function(t){return{_root:this.Node(t)}}},{key:"traverseBF",value:function(t){var e=[];if(this.state.tree){e.push(this.state.tree._root);for(var a=e.shift();a;){for(var n=0,r=a.children.length;n<r;n++)e.push(a.children[n]);t(a),a=e.shift()}}}},{key:"contains",value:function(t,e){this.traverseBF(function(t){return e(t)})}},{key:"add",value:function(t,e){var a=this.Node(t);this.contains(e,function(t){t.data.path===e&&t.children.push(a)})}},{key:"isFaulty",value:function(t){return this.props.faulty.includes(t)}},{key:"GenerateChildren",value:function(t,e,a){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=a.slice(0);if(l[r]=!1,i+=r,u<e)for(var c=function(a){var r;l[a]&&(n.contains(i,function(t){t.data.path===i&&(r=n.isFaulty(a)?t.data.input===y?"0":y:t.data.input)}),n.isFaulty(0)&&"0"===i&&(r=Math.round(Math.random()).toString()),r="0"===r?"0":y,n.add({input:r,path:"".concat(i).concat(a),output:b},i),n.GenerateChildren(t,e,l,a,i,u+1))},s=0;s<l.length;s++)c(s)}},{key:"Decide",value:function(t,e){var a=this;this.traverseBF(function(t){t.data.path.length===e+1&&(t.data.output=t.data.input)});for(var n=0;n<=e-1;n++)for(var r=function(n){a.traverseBF(function(a){if(a.data.path.length===n){var r=Array(3).fill(0),i=a.children.reduce(function(t,e){return"0"===e.data.output&&r[0]++,e.data.output===y&&r[1]++,e.data.output===b&&r[2]++,r},0);i[0]>(t-e)/2?a.data.output="0":i[1]>(t-e)/2?a.data.output=y:a.data.output=b}})},i=e;i>0;i--)r(i)}},{key:"mapTree",value:function(t){var e=this;return t.map(function(t){return{name:"G".concat(t.data.path[t.data.path.length-1]),attributes:t.data,children:e.mapTree(t.children),_collapsed:t.data.path.length>1}})}},{key:"renderResult",value:function(){for(var t=this,e=[],a=0;a<this.props.N;a++)e.push(a);return e.map(function(e){return r.a.createElement("p",{className:"list",key:e},"General ",e," ",t.isFaulty(e)?r.a.createElement("span",null,"is a traitor"):r.a.createElement("span",null,"decides on value ",t.state.tree._root.data.output))})}},{key:"render",value:function(){var t=this,e=this.state,a=e.myTreeData,n=e.finished;return r.a.createElement("div",{className:"treeContainer",ref:function(e){return t.treeContainer=e}},a.length>0&&r.a.createElement(v.a,{data:this.state.myTreeData,orientation:"vertical",translate:this.state.translate,initialDepth:1,nodeSize:{x:80,y:200},styles:{nodes:{node:{circle:{fill:"#364FC7"},attributes:{stroke:"black"}},leafNode:{attributes:{stroke:"black"}}}}}),n&&r.a.createElement("div",{className:"result-container"},this.renderResult()))}}]),e}(r.a.Component),g=(a(65),function(t){function e(){var t,a;Object(l.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(r)))).state={N:0,M:0,faulty:[]},a.handleSubmit=function(t,e,n){a.setState({N:t,M:e,faulty:n})},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.state,e=t.M,a=t.N,n=t.faulty;return r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"container"},r.a.createElement(p,{onSubmitClick:this.handleSubmit}),r.a.createElement(k,{N:a,M:e,faulty:n})))}}]),e}(r.a.Component)),N=function(){return r.a.createElement("div",null,r.a.createElement(g,null))};u.a.render(r.a.createElement(N,null),document.querySelector("#root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.1866e08b.chunk.js.map